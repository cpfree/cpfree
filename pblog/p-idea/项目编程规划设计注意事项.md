# 项目编程规划设计注意事项

> 一个项目模块如果没有做好的话, 过段时间就相当于没有做, 新项目需要用到该模块的时候也许它可以作为参考, 但是八成不能直接使用.

## 项目设计特性

初期优先考虑: 可行性

之后把基础的功能做出来, 保持简单

在设计时, 优先保证可维护性, 可扩展性

之后为了提高速度, 再去增加一些复杂度, 降低一些可维护性, 来提高效率和速度.

设计完成后保证可靠性.

1. 可行性
2. 可维护性, 可扩展性
3. 可读性, 健壮性, 可靠性
4. 时间成本, 效率速度.
5. 空间成本最便宜, 

## 1. 选择合适的工具

必须
   1. 依赖管理工具: maven, gradle
   2. 版本管理工具: git, svn
   3. 合适的IDE
   4. ansible

完成部署, 打包的自动化构建.

它看似很简单, 但如果做不好的话, 在这方面浪费的时间可能超过调bug的时间.

想做好的话, 可以考虑编写自动化脚本, 如果完美的话, 实现serverless, 用代码和配置控制一切.

## 2. 选择合适的框架

1. 前后端分离
2. B/S, C/S
3. Spring等

## 3. 不要重复

市场上成熟的框架即便不直接使用, 也可以参考一下.

项目上一定要消除重复的代码, 参考DRY (Don't Repeat Yourself)原则

## 4. 指定规则

一定要定义好编程规则, 和编程规范, 如设计规范, 参考阿里巴巴编程规范.

## 5. 做好规划

1. 数据表一定要事先建立完美, 至少扩展性要强
   因为后续的开发都是依赖数据库开发的, 数据表建立不好, 后续将会造成非常大的麻烦.
   它很可能直接决定了你代码里面字段定义的名称.
   如果数据库设计有问题, 项目设计初期, 能修改的时候一定要修改, 能早修改一定要早修改, 哪怕是反复修改, 大量的修改, 哪怕过程很痛苦, 如果你因为修改量比较大而不去修改, 后续的各种开发和扩展将出现大量问题.
   
2. 使用合适的ORM, 数据传输DTO规范, 这个地方最好指定严格的标准, 哪怕损失些速度等等.
   数据传输是血液, 数据表设计完成之后, DTO就显得非常重要, 而且这一块内容不像接口设计和模块设计那么容易感知, 项目开发中往往忽视这一块, 导致后续出现大量的麻烦, 尤其是在调bug的时候, 处理bug的过程痛苦
   能修改的时候一定要修改, 能早修改一定要早修改, 哪怕是反复修改, 大量的修改, 哪怕过程很痛苦, 如果你因为修改量比较大而不去修改, 后续的各种开发和扩展将出现大量问题.
   还可能造成数据的混乱.

3. 模块设计
   模块设计很重要, 微服务, SOA一定要选择好
   > 这很大程度上决定了项目是否高可用, 如果模块设计好的话, 也能够避免非常多的问题.

4. 接口设计
   面向接口编程, 面向规范编程, 面向契约编程
   > 接口设计不好, 会给开发带来非常大的麻烦, 重要性不言而喻, 尤其是团队合作的时候.

> 模块设计不好的话, 后续的改动会很麻烦, 但是它是能改动的, 即便花几个月改动, 改动过后bug也一般不会出现太多.
> 数据表设计不好, 会影响到ORM, 而且数据表改动相对来说和接口设计差不多重要
> 接口设计不好直接会影响到代码质量, 和团队的协作, 但是后续修改的话比较麻烦.
> ROM, DTO这个地方相当相当重要, 它负责各个模块,数据库之间的传输, 这个地方很容易设计, 但是如果这个地方出现了问题, 那就问题大了, 会造成代码混乱, 可以说一个项目业务代码的50%都是依照这个来的, 一旦这个地方出现了问题, 一定要马上修改好, 设计好, 否则任其发展, 就准备好面临着项目挂掉的风险吧, 这个地方调bug, 是非常非常费劲的, 这个地方就像是人的肝脏一样沉默，由于损害的发生往往静寂无声，既便某些小方面逻辑出现了问题, 也能很容易调整, 令人难以察觉，但是一旦出现大规模的问题症状时，往往为时已晚, 此时很可能`重做比修改快`.

## 6. 代码要写好

1. 高内聚
2. 设计模式啥的, 出现在核心领域, 其余的按照规范来开发
3. 泛型一定要写好
4. 优先考虑注解, 反射等减少代码量的设计
5. 接口名称一定要定义好

### 6.1 日志

日志的主要作用是监控记录和调bug, 不要乱输出日志, 也不要输出太多日志, 脱离业务处的代码, 日子也要脱离业务, 

输出的日志一定要准确, 宁缺毋滥, 万万不能误导其他人
   > 如前端调用后台, 不要调用了后台就打印调用成功, 一定要接收到后台调用成功的消息, 才能打印调用成功.

## 7. 注释一定要写好

过时的注解一定要删除, 别想着还会有人看, 也别想着以后会有人用到, 实在需要用到的话, 让他去翻版本历史.

## 8. 文档一定要建立好

> 建立文档非常麻烦, 需要大量的时间和精力, 而且过程还比较枯燥乏味, 但这是非常重要的, 项目上应该多分配些时间在写文档上.

代码开发的时候是面向对象开发的

初学者读取文档是最好是`面向过程写文档`

`面向对象写文档`是给那些熟悉框架或文档的人用的.

过时的文档一定要删除, 别想着还会有人看, 也别想着以后会有人用到, 实在需要用到的话, 让他去翻版本历史.

再好的文档修改几次之后也很容易沦为垃圾, 然后这个垃圾再去误导一堆程序员.

多加点写文档的时间, 哪怕是减少些代码review的时间.

### debug以及持续集成

1. 监控界面: 实现实时监控
2. 单元测试: 让代码生命周期更长
3. 代码review, 挑出代码错误和不合理
4. 完善的持续集成工具.

### 协同合作工具

敏捷开发平台, 禅道等.
