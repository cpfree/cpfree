---
keys: version,package,版本号
type: copy,blog,trim
url: <https://docs.microsoft.com/en-us/nuget/concepts/package-versioning>,<https://cloud.tencent.com/developer/article/1341130>,<https://blog.csdn.net/u012107143/article/details/78731272>
---

# 项目版本号命名规范

> 参考网址: <https://docs.microsoft.com/en-us/nuget/concepts/package-versioning>,<https://cloud.tencent.com/developer/article/1341130>,<https://blog.csdn.net/u012107143/article/details/78731272>

## 产品版本号命名示例

1. Linux Kernel： 0.0.1，1.0.0，2.6.32，3.0.18…，若用 X.Y.Z 表示，则偶数 Y 表示稳定版本，奇数 Y 表示开发版本。
2. Windows：windows 98，windows 2000，windows xp，windows 7…，最大的特点是杂乱无章，毫无规律。
3. SSH Client：0.9.8。
4. OpenStack：2014.1.3，2015.1.1.dev8。

## 版本号发展史

### Assembly-Versioning

> 微软文档: <https://docs.microsoft.com/en-us/dotnet/framework/app-domains/assembly-versioning>

![传统版本号](https://gitee.com/cpfree/picture-warehouse/raw/master/pic1/20210718165248.png)

每个装配都有一个版本编号作为其身份的一部分。因此，两个按版本编号不同的组件在运行时被视为完全不同的组件。此版本编号物理上表示为具有以下格式的四部分字符串：

`<主要版本>.<小版本>.<生成编号>.<修订版>`

> 例如，版本 1.5.1254.0 表示 1 为主要版本，5 表示小版本，1254 表示生成编号，0 表示修订号。
> 
> 主版本号的改变意味着 API 出现不兼容的修改或者是功能或架构的大幅度修改调整；次版本号改变意味着 API 出现兼容的修改（通常是新增）。

缺陷: 

   1. 我们如何能够准确地向所有人传递这样的版本规则呢？当我们在向全世界提供一个库（比如 NuGet 包）的时候，我们怎么让团队所有人都知道我们正在为哪个版本开发新功能呢？
   2. 我们又应该在何时更新程序集或者 NuGet 的版本号呢（在功能开发开始？差不多完成？临近发布？）？传统的版本号记录不了这些信息，于是我们不得不用一些额外的方式来记录，这就增加了维护成本。

### 语义版本号(Semantic Versioning)

> 官方说明: <https://docs.microsoft.com/en-us/nuget/concepts/package-versioning>

语义版本号由五个部分组成: **主版本号、次版本号、补丁号、预发布版本标签、构建号**.

   1.0.1
   1.0.1-rc
   1.0.1-beta
   1.0.1-alpha.1
   1.0.1-alpha.2
   1.0.1-release

   1. 主版本号: 主版本号的改变意味着 API 出现不兼容的修改或者是功能或架构的大幅度修改调整时增加.
   2. 次版本号: API 出现兼容的修改(通常是新增), 增加新的业务功能时增加。
   3. 修订号: 代码整理, bug修复, 代码优化等, 若不考虑版本标签和构建号的话, 一般只要有改动就增加。
   4. 预发布版本标签: 加到“主版本号.次版本号.修订号”的后面，作为延伸。
   5. 构建号: 构建次数 

   > - alpha：内部版本
   > - beta：测试版
   > - rc：即将作为正式版发布
   > - release：发行版
   > - SNAPSHOT：快照版

#### 先行版本号(Pre-release versions)

> 意味该版本不稳定，可能存在兼容性问题。
> 当要发布大版本或者核心的Feature时，但是又不能保证这个版本的功能 100% 正常。这个时候就需要通过发布先行版本。比较常见的先行版本包括：内测版、灰度版本了和RC版本。

-alpha: Alpha release, 通常用于正在进行的工作和实验。
-beta: Beta release, 通常是为下一个计划版本完成的功能，但可能包含已知的错误。
-rc: Release candidate, 通常是可能最终（稳定）的版本，除非出现重大错误。

#### 开发版本号

> 常用于 CI-CD（持续集成和持续交付）

格式为 X.Y.Z-dev[正整数]，如 1.0.1-dev4。

#### 版本号排序

排序规则为依次比较主版本号、次版本号和修订号的数值，如 1.0.0 < 1.0.1 < 1.1.1 < 2.0.0；对于先行版本号和开发版本号，有：1.0.0.a100 < 1.0.0，2.1.0-dev3 < 2.1.0；当存在字母时，以 ASCII 的排序来比较，如 1.0.0.a1 < 1.0.0.b1。

## 版本号定义

### package version 流程

1. 项目立项

   版本格式：`0.0.0`

2. 开发阶段时

   > 无法作为通用版本对外公布, 结构不完全确定, 此时甚至API都可能会随意调整.

   版本格式: `0.次版本号.修订号`

3. 开发完成后，测试通过, 发布API，或进入二方库时
   
   > 此时版本基本稳定, 可以对外公布使用，意味着API不再会被随意修改。

   版本格式：`1.0.0`

4. 后续修订
   
   版本格式: `主版本号.次版本号.修订号`

   - 主版本号：全盘重构时增加；重大功能或方向改变时增加；大范围不兼容之前的接口时增加；
   - 次版本号：增加新的业务功能时增加；
   - 修订号：增加新的接口时增加；在接口不变的情况下，增加接口的非必填属性时增加；增强和扩展接口功能时增加。

## 注意

1. 同一版本号不得重复发布, 除非保证两次发布内容完全一致.
2. 没有特殊需求不会修改API，尤其是对API进行不兼容的升级，或弃用时要特别谨慎。
3. 如果需要弃用API，要提前在一个或几个版本中加入弃用标示或注解，并在文档中，建议用户更换为其他可替换的API，然后在下个主版本号升级时，再真正丢掉弃用的API。
4. **新增接口时：如果该新增的接口只是对现有的业务线进行扩展则增加修订号；如果是为了增加新的业务线则增加次版本号。**
5. 在接口还没有确定下来的时候，应该先使用开发版本号。
6. 业务功能 > 功能 > 接口
