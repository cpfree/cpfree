# 分布式设计

## 思想

一个分布式服务需要

## 需求

一个分布式服务需要

1. 能做扩容
2. 高可用

## 难点问题

1. 服务器的地址的维护
    1. 每个服务启动之后将自己的信息暴露出来.
    2. 开启一个注册服务, 每个服务只需要和注册服务交流就可以获取其他所有服务.
2. 对目标服务进行负载均衡
    服务之间的负载均衡算法, 随机/轮询
3. 服务的动态感知
    每个服务的心跳机制.
4. 防止单点故障(设计一个集群, master/slave)
5. 数据同步()
6. 选举一个leader(选举算法) 
7. 跨库的一致性(2PC)
8. 减少数据同步的开销(observer, 非投票节点)

## Zookeeper

Zookeeper 分布式协调组件

## question

1. 什么是分布式一致性问题

   一致性的定义

    在分布式系统中，运行着多个相互关联的服务节点。

    一致性是指分布式系统中的多个服务节点，给定一系列的操作，在约定协议的保障下，使它们对外界呈现的状态是一致的。换句话说，也就是保证集群中所有服务节点中的数据完全相同并且能够对某个提案（Proposal）达成一致。

## 数据结构

解决单点问题
选举机制